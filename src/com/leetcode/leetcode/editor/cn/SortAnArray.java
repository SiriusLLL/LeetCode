//ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œè¯·ä½ å°†è¯¥æ•°ç»„å‡åºæ’åˆ—ã€‚ 
//
// 
//
// 
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// 
//è¾“å…¥ï¼šnums = [5,2,3,1]
//è¾“å‡ºï¼š[1,2,3,5]
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// 
//è¾“å…¥ï¼šnums = [5,1,1,2,0,0]
//è¾“å‡ºï¼š[0,0,1,1,2,5]
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// 1 <= nums.length <= 5 * 10â´ 
// -5 * 10â´ <= nums[i] <= 5 * 10â´ 
// 
//
// Related Topics æ•°ç»„ åˆ†æ²» æ¡¶æ’åº è®¡æ•°æ’åº åŸºæ•°æ’åº æ’åº å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ å½’å¹¶æ’åº ğŸ‘ 934 ğŸ‘ 0


package com.leetcode.leetcode.editor.cn;

//leetcode submit region begin(Prohibit modification and deletion)
class Solution {
    public int[] sortArray(int[] nums) {
        if (nums.length > 1) {
            mergeSort(nums);
        }
        return nums;
    }

    public static int MAXN = 50001;
    public static int[] help = new int[MAXN];

    // æ–¹æ¡ˆä¸€ï¼šé€’å½’
//    public static void mergeSort(int[] arr) {
//        sort(arr, 0, arr.length - 1);
//    }
//
//    public static void sort(int[] arr, int l, int r) {
//        // æ•°ç»„é‡Œåªæœ‰ä¸€ä¸ªæ•°å­—æ—¶ç›´æ¥è¿”å›
//        if (l == r) {
//            return;
//        }
//
//        // å–ä¸­ç‚¹
//        int m = (l + r) / 2;
//        // é€šè¿‡é€’å½’ï¼ŒäºŒåˆ†æ‹†è§£æ•°ç»„çš„æ¯ä¸€ä¸ªåŠåŒº
//        sort(arr, l, m);
//        sort(arr, m + 1, r);
//        // åˆå¹¶æ‹†è§£çš„æ•°ç»„
//        merge(arr, l, m, r);
//    }

    // æ–¹æ¡ˆäºŒï¼šéé€’å½’
    public static void mergeSort(int[] arr) {
        int n = arr.length;
        // stride <<= 1 æ­¥é•¿ç¿»å€
        for (int l, m, r, stride = 1; stride < n; stride <<= 1) {
            l = 0;
            while (l < n) {
                // ä¸­ç‚¹ä½ç½®
                m = l + stride - 1;
                // å½“å³ä¾§æ²¡æœ‰æ•°å­—æ—¶break
                if (m + 1 >= n) {
                    break;
                }

                // å³ä¾§æœ‰æ•°å­—
                // æ±‚å³ä¾§çš„å³è¾¹ç•Œ
                // æ­¤æ—¶å³ä¾§çš„æ•°å­—ä¸ä¸€å®šå¤Ÿå–ï¼Œå¯èƒ½æ­¥é•¿ä¸º4æ—¶ï¼Œå³ä¾§åªæœ‰ä¸åˆ°4ä¸ªæ•°
                // æ‰€ä»¥å³è¾¹ç•Œå¯èƒ½çš„å–å€¼æ•°é‡ä¸º l+ä¸¤å€æ­¥é•¿-1ï¼ˆè¿˜æ²¡å–åˆ°æœ€åä¸€ä¸ªï¼‰æˆ–è€…n-1ï¼ˆå–åˆ°æœ€åä¸€ä¸ªäº†ï¼‰
                // æ­¤æ—¶å³è¾¹ç•Œå–å®ƒä¿©å½“ä¸­è¾ƒå°çš„é‚£ä¸ªå³å¯
                r = Math.min(l + (stride << 1) - 1, n - 1);
                // åˆå¹¶
                merge(arr, l, m, r);
                l = r + 1;
            }
        }
    }

    public static void merge(int[] arr, int l, int m, int r) {
        // ä¸´æ—¶æ•°ç»„å…ƒç´ çš„ä¸‹æ ‡
        int i = l;
        // å·¦åŠåŒºç¬¬ä¸€ä¸ªæœªæ’åºçš„å…ƒç´ 
        int a = l;
        // å³åŠåŒºç¬¬ä¸€ä¸ªæœªæ’åºçš„å…ƒç´ 
        int b = m + 1;

        // åˆå¹¶
        // å·¦åŠåŒºå’Œå³åŠåŒºéƒ½æœ‰æ•°å­—çš„æƒ…å†µï¼Œå³å·¦å³åŠåŒºçš„æ•°å­—éƒ½æ²¡è€—å°½
        while (a <= m && b <= r) {
            // å·¦åŠåŒºç¬¬ä¸€ä¸ªå…ƒç´ æ›´å°ï¼Œé‚£ä¹ˆhelp[i++] = arr[a++]ï¼Œå…ˆèµ‹å€¼å†++ï¼Œæ¯”è¾ƒä¸‹ä¸€å¯¹
            // å³åŠåŒºç¬¬ä¸€ä¸ªå…ƒç´ æ›´å°ï¼Œé‚£ä¹ˆhelp[i++] = arr[b++]ï¼Œå…ˆèµ‹å€¼å†++ï¼Œæ¯”è¾ƒä¸‹ä¸€å¯¹
            help[i++] = arr[a] <= arr[b] ? arr[a++] : arr[b++];
        }

        // å·¦å³åŠåŒºæœ€åå¿…ä¼šæœ‰ä¸”åªä¸€ä¸ªå‰©ä½™äº†æ•°å­—
        // å³aæˆ–bå¿…æœ‰ä¸€ä¸ªè¶Šç•Œè€Œå¦ä¸€ä¸ªä¸è¶Šç•Œï¼ŒæŠŠä¸è¶Šç•Œçš„é‚£ä¸ªæ•°åŠ åˆ°æ•°ç»„æœ€åä¸€ä½
        while (a <= m) {
            help[i++] = arr[a++];
        }
        while (b <= r) {
            help[i++] = arr[b++];
        }

        // æœ€åæŠŠè¾…åŠ©æ•°ç»„ä¸­çš„å…ƒç´ æŒ‰é¡ºåºæ‹·è´åˆ°åŸæ•°ç»„å³å¯
        for (i = l; i <= r; i++) {
            arr[i] = help[i];
        }
    }
}
//leetcode submit region end(Prohibit modification and deletion)
